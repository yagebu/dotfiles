#!/bin/sh

REPOSITORY=ks:backup/js-mba.attic

# Backup all of /etc and /home except a few excluded directories
/usr/local/bin/attic create --stats                  \
    $REPOSITORY::`date +%Y-%m-%d`                    \
    /Users/jakob                                     \
    --exclude /Users/jakob/.bup                      \
    --exclude /Users/jakob/.cache                    \
    --exclude /Users/jakob/.config/fresh             \
    --exclude /Users/jakob/.config/vim               \
    --exclude /Users/jakob/.Trash                    \
    --exclude /Users/jakob/dev/neovim                \
    --exclude /Users/jakob/Google\ Drive             \
    --exclude /Users/jakob/Library                   \
    --exclude /Users/jakob/Movies                    \
    --exclude /Users/jakob/Music                     \
    --exclude /Users/jakob/Pictures                  \
    --exclude /Users/jakob/VMs                       \
    --exclude '*.pyc'

/usr/local/bin/attic prune -v $REPOSITORY --keep-daily=14 --keep-weekly=8 --keep-monthly=12 --keep-yearly=10
